{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Nico/Projects/Cocktails_new/cocktails/lib/db.ts"],"sourcesContent":["import sqlite3 from \"sqlite3\";\r\nimport { open } from \"sqlite\";\r\n\r\nconst db = await open({\r\n    filename: \"./db.db\",\r\n    driver: sqlite3.Database\r\n});\r\n\r\nawait db.exec(`\r\n    DROP TABLE IF EXISTS Cocktail;\r\n    DROP TABLE IF EXISTS Step;\r\n    DROP TABLE IF EXISTS Ingredient;\r\n    DROP TABLE IF EXISTS Cocktail_Ingredient;\r\n`);\r\n\r\nawait db.exec(`\r\n    CREATE TABLE IF NOT EXISTS Cocktail (\r\n        Cocktail_ID INTEGER PRIMARY KEY AUTOINCREMENT,\r\n        Name TEXT,\r\n        Description TEXT\r\n    );\r\n\r\n    CREATE TABLE IF NOT EXISTS Step (\r\n        Step_ID INTEGER PRIMARY KEY AUTOINCREMENT,\r\n        Cocktail_ID INTEGER,\r\n        Number INTEGER,\r\n        Description TEXT,\r\n        FOREIGN KEY (Cocktail_ID) REFERENCES Cocktail(Cocktail_ID)\r\n    );\r\n\r\n    CREATE TABLE IF NOT EXISTS Ingredient (\r\n        Ingredient_ID INTEGER PRIMARY KEY AUTOINCREMENT,\r\n        Name TEXT\r\n    );\r\n\r\n    CREATE TABLE IF NOT EXISTS Cocktail_Ingredient (\r\n        Cocktail_ID INTEGER,\r\n        Ingredient_ID INTEGER,\r\n        Amount DECIMAL,\r\n        Unit TEXT,\r\n        Optional BOOLEAN,\r\n        FOREIGN KEY (Cocktail_ID) REFERENCES Cocktail(Cocktail_ID),\r\n        FOREIGN KEY (Ingredient_ID) REFERENCES Ingredient(Ingredient_ID)\r\n    );\r\n`);\r\n\r\n// Beispiel-Daten einfügen (nur einmal, bei Konflikt wird die Einfügung ignoriert)\r\nawait db.exec(`\r\n    BEGIN TRANSACTION;\r\n\r\n    INSERT OR IGNORE INTO Cocktail (Cocktail_ID, Name, Description) VALUES\r\n        (1, 'Mojito', 'Erfrischender Cocktail mit Limette, Minze und Rum'),\r\n        (2, 'Negroni', 'Bitter-süßer Cocktail mit Gin, Campari und Vermouth');\r\n\r\n    INSERT OR IGNORE INTO Step (Step_ID, Cocktail_ID, Number, Description) VALUES\r\n        (1, 1, 1, \"Limetten und Zucker\"), -- Mojito: Limetten und Zucker\r\n        (2, 1, 2, \"Minze zerstoßen\"), -- Mojito: Minze zerstoßen\r\n        (3, 1, 3, \"Rum und Soda\"), -- Mojito: Rum und Soda\r\n        (4, 2, 1, \"Zutaten ins Glas\"), -- Negroni: Zutaten ins Glas\r\n        (5, 2, 2, \"Rühren\"); -- Negroni: Rühren\r\n\r\n    INSERT OR IGNORE INTO Ingredient (Ingredient_ID, Name) VALUES\r\n        (1, 'Limette'),\r\n        (2, 'Minze'),\r\n        (3, 'Weißer Rum'),\r\n        (4, 'Zucker'),\r\n        (5, 'Soda'),\r\n        (6, 'Gin'),\r\n        (7, 'Campari'),\r\n        (8, 'Wermut');\r\n\r\n    INSERT OR IGNORE INTO Cocktail_Ingredient (Cocktail_ID, Ingredient_ID, Amount, Unit, Optional) VALUES\r\n        -- Mojito\r\n        (1, 1, 1, 'piece', 0), -- Limette\r\n        (1, 2, 8, 'leaves', 0), -- Minze\r\n        (1, 3, 50, 'ml', 0), -- Weißer Rum\r\n        (1, 4, 2, 'tsp', 0), -- Zucker\r\n        (1, 5, 50, 'ml', 0), -- Soda\r\n        -- Negroni\r\n        (2, 6, 30, 'ml', 0), -- Gin\r\n        (2, 7, 30, 'ml', 0), -- Campari\r\n        (2, 8, 30, 'ml', 0); -- Wermut\r\n\r\n    COMMIT;\r\n`);\r\n\r\nexport { db };"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,KAAK,MAAM,IAAA,mKAAI,EAAC;IAClB,UAAU;IACV,QAAQ,kHAAO,CAAC,QAAQ;AAC5B;AAEA,MAAM,GAAG,IAAI,CAAC,CAAC;;;;;AAKf,CAAC;AAED,MAAM,GAAG,IAAI,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6Bf,CAAC;AAED,kFAAkF;AAClF,MAAM,GAAG,IAAI,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCf,CAAC"}},
    {"offset": {"line": 161, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Nico/Projects/Cocktails_new/cocktails/app/api/cocktail/route.ts"],"sourcesContent":["import { db } from \"@/lib/db\";\r\nimport { NextRequest, NextResponse } from \"next/server\";\r\n\r\nexport async function GET(req: NextRequest, { params }: { params: { id: string } }) {\r\n    const id = parseInt(req.nextUrl.searchParams.get(\"id\") || \"\", 10);\r\n    if (!id) {\r\n        return NextResponse.json({ error: \"Missing id query parameter\" }, { status: 400 });\r\n    }\r\n\r\n    // load cocktail\r\n    const cocktail = await db.get(\r\n        `SELECT Cocktail_ID AS cocktail_id, Name AS cocktail_name, Description AS cocktail_description\r\n         FROM Cocktail WHERE Cocktail_ID = ?`,\r\n        [id]\r\n    );\r\n\r\n    if (!cocktail) return NextResponse.json({ error: \"Cocktail not found\" }, { status: 404 });\r\n\r\n    // load ingredients\r\n    const ingredientsRows = await db.all(\r\n        `SELECT Ingredient.Name AS ingredient_name, CI.Amount AS amount, CI.Unit AS unit, CI.Optional AS optional\r\n         FROM Cocktail_Ingredient AS CI\r\n         JOIN Ingredient ON Ingredient.Ingredient_ID = CI.Ingredient_ID\r\n         WHERE CI.Cocktail_ID = ?`,\r\n        [id]\r\n    );\r\n\r\n    const ingredients = (ingredientsRows || []).map((r: any) => ({\r\n        ingredient_name: r.ingredient_name,\r\n        amount: r.amount,\r\n        unit: r.unit,\r\n        optional: !!r.optional\r\n    }));\r\n\r\n    // load steps\r\n    const stepsRows = await db.all(\r\n        `SELECT Number AS step_number, Description AS instruction\r\n         FROM Step\r\n         WHERE Cocktail_ID = ?\r\n         ORDER BY Number ASC`,\r\n        [id]\r\n    );\r\n\r\n    const steps = (stepsRows || []).map((r: any) => ({\r\n        step_number: r.step_number,\r\n        instruction: r.instruction\r\n    }));\r\n\r\n    return NextResponse.json({\r\n        cocktail_id: cocktail.cocktail_id,\r\n        cocktail_name: cocktail.cocktail_name,\r\n        cocktail_description: cocktail.cocktail_description,\r\n        ingredients,\r\n        steps\r\n    });\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;;;;;AAEO,eAAe,IAAI,GAAgB,EAAE,EAAE,MAAM,EAA8B;IAC9E,MAAM,KAAK,SAAS,IAAI,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,SAAS,IAAI;IAC9D,IAAI,CAAC,IAAI;QACL,OAAO,6JAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA6B,GAAG;YAAE,QAAQ;QAAI;IACpF;IAEA,gBAAgB;IAChB,MAAM,WAAW,MAAM,8HAAE,CAAC,GAAG,CACzB,CAAC;4CACmC,CAAC,EACrC;QAAC;KAAG;IAGR,IAAI,CAAC,UAAU,OAAO,6JAAY,CAAC,IAAI,CAAC;QAAE,OAAO;IAAqB,GAAG;QAAE,QAAQ;IAAI;IAEvF,mBAAmB;IACnB,MAAM,kBAAkB,MAAM,8HAAE,CAAC,GAAG,CAChC,CAAC;;;iCAGwB,CAAC,EAC1B;QAAC;KAAG;IAGR,MAAM,cAAc,CAAC,mBAAmB,EAAE,EAAE,GAAG,CAAC,CAAC,IAAW,CAAC;YACzD,iBAAiB,EAAE,eAAe;YAClC,QAAQ,EAAE,MAAM;YAChB,MAAM,EAAE,IAAI;YACZ,UAAU,CAAC,CAAC,EAAE,QAAQ;QAC1B,CAAC;IAED,aAAa;IACb,MAAM,YAAY,MAAM,8HAAE,CAAC,GAAG,CAC1B,CAAC;;;4BAGmB,CAAC,EACrB;QAAC;KAAG;IAGR,MAAM,QAAQ,CAAC,aAAa,EAAE,EAAE,GAAG,CAAC,CAAC,IAAW,CAAC;YAC7C,aAAa,EAAE,WAAW;YAC1B,aAAa,EAAE,WAAW;QAC9B,CAAC;IAED,OAAO,6JAAY,CAAC,IAAI,CAAC;QACrB,aAAa,SAAS,WAAW;QACjC,eAAe,SAAS,aAAa;QACrC,sBAAsB,SAAS,oBAAoB;QACnD;QACA;IACJ;AACJ"}}]
}